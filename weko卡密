local NotificationLibrary = loadstring(game:HttpGet("https://raw.githubusercontent.com/IceMinisterq/Notification-Library/Main/Library.lua"))()


--ç™½åå•--
local Players = game:GetService("Players")
local player = Players.LocalPlayer  -- æå‰è·å–æœ¬åœ°ç©å®¶å¯¹è±¡

-- GitHubç™½åå•æ–‡ä»¶çš„åŸå§‹é“¾æ¥ï¼ˆæ›¿æ¢ä¸ºä½ çš„é“¾æ¥ï¼‰
local githubWhitelistUrl = "https://raw.githubusercontent.com/HKJQ3/-script/refs/heads/main/whitelist.txt"

-- å­˜å‚¨ä»GitHubåŠ è½½çš„ç™½åå•
local whitelist = {}

-- ä»GitHubåŠ è½½ç™½åå•çš„å‡½æ•°
local function loadWhitelistFromGitHub()
    -- å‘é€HTTPè¯·æ±‚
    local success, response = pcall(function()
        return game:HttpGet(githubWhitelistUrl)
    end)
    
    if success then
        -- è§£ææ–‡æœ¬ï¼šæŒ‰æ¢è¡Œåˆ†å‰²æˆç”¨æˆ·ååˆ—è¡¨ï¼ˆæ ¹æ®ä½ çš„æ–‡ä»¶æ ¼å¼è°ƒæ•´ï¼‰
        whitelist = string.split(response,"\n")
    else
        warn("FUCKï¼š" .. response)
    end
end

-- æ£€æŸ¥ç”¨æˆ·æ˜¯å¦åœ¨ç™½åå•ä¸­
local function isInWhitelist(username)
    for _, whitelistedUser in pairs(whitelist) do
        -- å»é™¤ç”¨æˆ·åå‰åå¯èƒ½çš„ç©ºæ ¼å’Œæ¢è¡Œç¬¦
        if username == string.gsub(whitelistedUser, "%s", "") then
            return true
        end
    end
    return false
end

-- å®šæ—¶æ£€æŸ¥ç™½åå•å‡½æ•°ï¼ˆé—´éš”æ—¶é—´å¯è‡ªå®šä¹‰ï¼Œè¿™é‡Œè®¾ä¸º60ç§’ï¼‰
local function startWhitelistCheckLoop()
    while true do
        wait(0)  -- æ¯0ç§’æ£€æŸ¥ä¸€æ¬¡
        loadWhitelistFromGitHub()  -- é‡æ–°åŠ è½½æœ€æ–°ç™½åå•
        -- æ£€æŸ¥å½“å‰ç”¨æˆ·æ˜¯å¦ä»åœ¨ç™½åå•ä¸­
        if not isInWhitelist(player.Name) then
            player:Kick("å‘ç”ŸæœªçŸ¥é”™è¯¯ï¼Œå·²ç§»é™¤è®¿é—®æƒé™")
            break  -- è¸¢å‡ºåç»ˆæ­¢å¾ªç¯
        end
    end
end

-- åˆå§‹åŒ–ï¼šåŠ è½½ç™½åå•å¹¶æ‰§è¡Œé¦–æ¬¡æ£€æŸ¥
loadWhitelistFromGitHub()

if not isInWhitelist(player.Name) then
    -- éç™½åå•ç”¨æˆ·å¤„ç†ï¼ˆå¦‚è¸¢å‡ºï¼‰
    NotificationLibrary:SendNotification("Error", "ğŸ’”åŠ è½½å¤±è´¥", 4)
else
    NotificationLibrary:SendNotification("Success", "ğŸ‘åŠ è½½æˆåŠŸ", 4)
    wait(0)
    loadstring(game:HttpGet("https://raw.githubusercontent.com/kkaaccnnbb/Virtual/refs/heads/main/VirtualLT.lua"))()
    -- å¯åŠ¨å®šæ—¶æ£€æŸ¥å¾ªç¯
    spawn(startWhitelistCheckLoop)  -- ä½¿ç”¨spawnå•ç‹¬å¼€å¯çº¿ç¨‹ï¼Œé¿å…é˜»å¡åç»­ä»£ç 
end
--ç™½åå•--
